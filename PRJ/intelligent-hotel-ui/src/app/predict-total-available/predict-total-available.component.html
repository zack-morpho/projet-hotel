<div class="app-container">
  <!-- Sidebar à gauche -->
  <nav class="sidebar">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXAAAACJCAMAAAACLZNoAAABrVBMVEX////0AJIAmugAl+bIAKX79vwAq/EAnOnkAJkAleUAqPD9+f0ApO7nAJgApu8AjeKmMrOETr/x7fmAUcDEA6bJAKHsAJUAj+OZNLW+g86WQLn//f+mes2DSL2nJK/Jg8xKctJPbtGVes6gNrSZPbfwyuvSAKCYzvPeacSOQLrfy+zxAJMvfNhBddRYas7GJq9yv/H4g79geNTu9/11WMT16vbost6c1vbl3PHSAJsyetdoVMTJ6fu3AKXwrNxSWcn65POAoOGnAKr43vT11e3zwOnayuut4vo4adBsyfWLzPOEs+jWYMAAhuDo+f7nkNG5s+L3YLDf6vneqt6/YcDngM7fVrzZJ6/ep97hvebpntPHc8i2X8KwQ7fZQrfRldXAULy3MLH3nM/zc7r6rN2HjtjPsuDMxOmzruHmT7HFmtmZXMKxkNWTcMqCY8fvfcjfdc2blNmrSrqYasmhq+KdIrGzZMSYUL/IS7vgSLbsWreQVcHsNarHjNLKqN6vzvDO2fNwidlmlN6Zwu1IvfP7tdtXjt2Vr+Vvsup6kNv2PqR1gtXlcsCgkNiEds0bSwg7AAAT+0lEQVR4nO2djV8SWRfHURkYHVBTRi0KM4Ms38UBpwWaZMgylR4UUVQMtaxnLd3tTX3ctDKzcvdvfu7LvMKACAN9Vuf32c9+Yq4D16+Hc8+55947JpMhQ4ZyiKB+dQ8umNwG8IqK4HM2Uc4K9uPCyO3L0eCcnpnJ1WaoeMVD2tedC6Mu12h7ZTtzAeScZbQb3IB3Y6MrXNnunH+5Ezka5jDw+Yr25gIomcrRMD8KeDe67lS0NxdA0bj2dWIBGvi7RSNQ0VfMjlvzOtHuAmpsz+HgDRWrMM1pXocefNGgrb94beAwRFnKnREZKlq+lJYZ80vAnxgBYTk0G9eYSWFmAO/pynfmIohOalyEOeZyxbtyIUR4NGZLlkfTroXK9+VCKERHsq7Np12up0aAUh7FzVlheBgMmEvGgFkmTSSygD8FA6YxK1smcalUhi07F0bTo3O/pjcXQHwic3LWl067Zn5NZy6C3HSX+gIHeKe5X9KX8yKCyNMYotVzhQTAnTYy+hJErKyuruSuyifpqOp1ezA9amSYpWi3u7u7ZTdXKxVXJ5rzwbTradn7dJ7FV7UAdWcnN1jMLMp7iDAeOXngwJ/m80CGTtMaAt6ylqM5nKCBwybijgkOvtwOGg68REUw8K85msNmGti22+EIQs8yBxx44VNW1MH6iC59PF/60Q1423O1Rmgz+D8PgE8jBx4sfMqqqe/evXvPDP+TqfAqtHAO/ZuKrGSklUkEnPJtRxkTsx0MprOmrEaeP5euUU3MyIMH6+tPnrx48fbnvb6+vntPytr5f6UoHtg4jv0iJPlSTbyLxmskCKfJtBAMBrPWoPz3w+3bvz+48/zjxsaNG69evX79enh4+Dege5A3UAV+g3+d9lpaXqKv/iZJkmpvnqJnxX/OA94qB+4kmJHnbbeRrgFdam5uHhZwA94Y+FBFfoN/mSLAiSPObpLcVfsMM70l/CucBg5F9MjOsPv5x/9efn+l7YpAW1Dz8Ot//vn77z/+ePvimeFSconba7GvIpZhd8YgR4uJprMdGDiOCMPT7Yt/dna2Ad28IgD/35urGx/XH4w0NTURBEFRTqeJegaAvzVWCWnIOdhit2uG1wxNCytnfcC+fUzYPTfjQisKIfCbH95fBS782u2r2rGIERbmkttut29qNYRpocAWBvadbp9Jj7rQ+s137zrf//Xxzp0RYh4Qf2NU286qXbud1LrO0zSyfOcEBB50ITX+uTDNN4n7fhhAvXIdPS/igU/Ryu59tJlh+Gh/ECv9dGF5Pmzw1UGk3b6rMb6FaEd0G6SZSDNzbgO2XoraSTJrxpCIpMwOKEC7f5oxYOsojiTtUZWJE3zUTJsB8P4t6MCNqrG+cg7ayT1FsMGHumggADzEcwD4thFP6yx+jyRXpBezCY+HphPRlDnFmKLAwI1lP7rrhCRJaMbOcGSHZdnEbBz49FlzP8ODGCVqGLjuioBhMwlyoCjEPRtyQ//CpczbxLYjOGGMl2UQCWeu4oC254QXAIdT5ngEBCm5Kp7nRsT88rL2TqYyyk1C7cQjsjm7+x39gPdWnrvOhaYb37lco0sVRh4BwyYb4lSXUBjez2nf8O8UNfIA6o5iXu3Ou0a439S1xFWwHxwsPpCs+iMx8PO17qfpRnNz86VL165KV4iFRiTXGQrkpQrgfhmCkeEOfi1MTPkg74msuUAnM5JLTRXrcrGCwAFvBfDwn52d2MSfVqgP1Mre7lcGVdhYFJxET7A7C0ELz/ZsxOXOm1eufID6H1bza0F/VKjLxQsDV1o4tygCr9Aumq97uxw2aQB8Ey5vYz14b2YI8NYYMYnLbTdvSsWea5dgMRNVM4d/qxBwpxeriPQgG7jp8jsMfFRhW04GS/eA2BneXJWKPVGS3eNNRBfr8XDoNRgxNYoLauCXLonVYwD8hd7905a/thXp1tlv1QDO/PkOGXi7gq7b4TCbaVquoeulcISXzSQMovAoZeJ3PElo8hzwKFo5JgJ+5ZcCr6mpramtLRa4etA0mUb+WnrnWppWWjOIiAFxc+bq+NLlVAKlNkHaw8EV4+hqnHY4tDZpagEXXMpbvfunLQAc8NYNOFzxkeE8ygZcLX4PmLj4IkybCwc+XFEfDoFD5Pq4FC1VCLgJmDgr/qknIHCtIFwC/vGBQiChGDmoUJkeAK+GJq6XhWerUsA5AFzYYxIxm08DnucsoKYmGEU0IdfkjR3sB1St3qnAmN/vHwvEvPl6g35qLDCV1eCvzgfcCT7wYH9//yDWlD0CaQEXIhJlfHAacIpzr62srLnDpR7p2MWyCRS1EFuo3qO1H1MAfjsf8L6HSAcmU+zb3d7eu4/lXz22f1wzOdnQ0NDa2tBafTimzdwbeGSxIVmtlkeKv1dgfHz8sLoauZTjcSTlO3gPvny++/BhL/78T09iGe+rAZx6B+UaFaMUPhqNbjkw8FQUKSMZ4aNkN1AVkH2wtCkY3sOyaO2Pm6b7U8UDH+ro6Lh+HQD/1tN7t6en57HYMPXF2jAJWAP7rEWOuPo4oHE/wF1fZ7FY6urq6uvrbZZxyczHW4F5Vwsm3gr+bpMNijfYP568C9Xb23v9+vWOjoc/19VWrgW8E2U+UljoCwaDDgE4TXsAEVY1lDGDe2hRfQuG3r3C5eZwupI4UDElaDoZLQk4+IV7D+4D61YCH6iFxt2KgdfWQHY1Vn/m3d5HFkgbCRKvs9ksItXxaqvViiwcEocBea0EPFA7CT7rbg8C3guBd/T1PVMRzwdccA8RAbhDAA6kPLkxsme3y8Chmf8oZVcIj714iKbNpnjJwKE3UQOHvqQB44YmDmzVWm0bU9/sPbRZZAHigLnNJmCFwKurBZ+CjFwGHpuEwHsk4Ij4vWdKP1sy8K+kPRN4VVUpxE9QnjlL0yFiIjfwK4UB780E7rVhA29FRo6BW631qnFx6lGdkrcFexWbBf8QAo5MHPNWAjd9UfAWgff1rSvevFTgbsjbLuEWgJ/VxpXpD8F62GiEplMEoxdw8B2XBs1b2MJrAFNbda0AvGZcea/fJrHGFo4duXUAtY7XWKsF4DXIozQofLi3AbmUnqPPn49k4M8Uk5gFAPdlAZd9eHiPFIjbV6Mrqz8w76qq/5xl0oUKnWyG5BuirCeRommfSR/gvT2fHz9+vC/9Sa2Ttce3cKgXGLfWQN4gDlHcOiX570f+wNRUwH8InDi0cByNgCjl1qFg4ce3YJBySxGlABP//HgfhSax/e8dGPi9A/kHCgAeXl5e3urHwIUoRTRgCpYNIO+9NRREEms/BOIrpsK1Cd6BPJFecinwN6VnmdOBbzzHeiJIkfbIwI8O1HHfrWqFx/ZbMXCbItB4JBh4vWj2U49sYNQ8DKhuA9KKw2OtX+SP837CwPsUCXABwKHcAvCMOJwhBeDSuhG3QLw7qys5xbfY4dvIXijJeqCBnw5c3mrSnDl1JQH/lhVmqy4AB4EkByqSgctuBgyih6px1V+dC7j63ZsE4IqNL6UBT2Lgym2WXwWvwmX3JYc2W1D5WN5Tz8x6PPCA39OBq+euflPsLxGB95zy4QHBxGW6fhR/W+oOFeimMsKYPMBVor5j4PfkMao04CwGvqr02KsY+OApfZG1hi1cEfl0AZfiLgy4wDsX8IdfTvnwKRsGPiBdGbBh4ON57vKjzCcfcCeUibovAJdHzZKAU8g07S0rFCHJNCgMm6f8pgrtQeB78usIXOcm+PBccykFAu/VyNudsXFLnQ17EpvAWwY+dYgt3KKVf4pCwHPMFnr3H38+OoLBytDQ0HV9geOlJMCH7wmROAoOzwycWSXJXU7+/DgLiYcQcK1Vs4W7lOufs4EHjlFqD3OfGhSIZwK31SHi2VNWsnID935Rp/b6Ag+JwJWpfdWZgZsInlc4JS7Bzp7AOJzoyj0fjoALNWSxgjycDfx+1mTafu1kZqapI/DYZ5z4KIiXGXh3McDVSrJshE/QdJQ6DfgdJ6WSIn3KBXxfSO1Rpgm5awCvB8TrCnApNVnAUd4DiaNEs6NDbwv3KYGr7LsE4JSHTcDyGk0zUYcjqvETBc2l9GHgGRPS3kkMvMF2PIBlxcQl4N4BG8hzAPKxzLdUKBfw4x40eXW35/43pLc/9QXOC8BfDmbrLJmPStDA0Q5NOh7NW0QuINPMAu5HvBsapClZEKWg2T85Shm3wenBuvpTohQ0PZsBPFYziWcLxVzLeR9v+C8OuEYBgtQIC0sU9ZLdgVkrnC4EHxrVqGgUPh+e5VKOMXCrVBaAYWG1CvgYTOTBf4cKJx44VHt0vzA9mwE80ICBS7Go7sB3hMRHx3WfERaf7kt0oYqP1lnWhQLvyAZuw8CPpQsw8VED91qgE6+vs8mQAxarTVn0gSU2OGa2DphUOsCzs3Is6vxeKvCMdSlu0YcrZwdXSlrOnWR38DyBDwHf0vjyFFLTBD68Iw9wCclATaZLMY1b65EXl4gHDmGlzaIoU4xBjwKI16kNXwR+IF3ALrwE4BkHwTJ74uSVBJlYqfpRwlZsEBOK42QXrNp36Qv8GA+aDYIv8A7ACVpo5EpbBSYOVWezHPrHxvyHdUJtUzb5KSsu+LRaAl7vLSmgCTTgQfNI+HseXC8aOLctlNhSSYbxpaQ0fE2KUvY2IxzHr+3CySvhgJ9iFGJZ8WMJaOFau00KB96RCXysBwOfPA4A3bK01uDURwU8UG+rR8xRBdkmyqrw2JZasdzTCvy22BCrEYLCo/1YLHZwX4wKTwfemAkcVrsQcDQdzm6KTRScWhXCwio5KizexhOsfBJnktZarFw4cI1BUwgLgWqtNmurmGtWq4Cb/DZs4/UCdcHAFT8x1oqJw4C+oaFOvHwsFXx6Pn263lEKcF4uIgPiCU68zuyJwFsUFZ+q/xRInMk4IIUjPZzcOOtwbOtr4SDxwcSFGlttjRWXNdXDnx8SVsBGvFWzBAOtUoUNfF9En+I9ysgzhzSBXyoAuCluVgBn5ak9blcDeHeew03V4jfXlANulD0hTITbx6FXcLmyxggsrZ4tArjpi5D6CNn9+CNUZqvJiDfGDq02pUBmpJ6ViVlahZo9clDS5aO7CuAPvx/8LBo4MaEE7pHbmEGyJWMuJecxhBrivu4NctJHv2RBTJj0eFAojoBrrFcGwNugjeddCNQHiT/MBg4nUyYFE4eD52ErWp6SAdw05bcovHc1GBwzfsA7gL8lkHdPndQae9wrrZF4+D12kG3hr67BDRDX3shvRbWh1cqq5cpATJSWeLMeBQYnv9nSrUztB89YQj4hd4UTliPsLgU8CevBm318Zs0V+cTy4nug33/PA/zZz5+fgL5pfNO8/jpk3NW2gZg4/a0x++0dO8T14zrLoyzcUIEBK1oMVHs8psxnDx4fQbcyNHT/ALz49BPqHwXwjVevXr1582ZDvoNaRHq6nNlZfiuVSCQ8nsROMsOzMisvf2Ab//Fj8OxpJz9Ioj0nzk0SJj0+D4ujQQRcy6mUqikYo2QuQsuWF/2cJm3crt3sjEHlXbVYqAjeDaS58Z1BTXyR4UnkJbmbJEBYD19QfAS/Dd7FZuxDLosAcnKXVJ98habMtGcMDZWuyAlJ7oSU/p/vd/QnHQ7jLIkyiWJZkmRP5N3I4ZTZwWw5glvGc+3LIp78SuyCEIjdieAz2xgAnOf6HcZ5QOXR5ksGrjVPwLAz7oZlzlkziFF8xgE15RH1Ei93C0dmAXE6NZHkJsyOkInaCgYnfnHfzqUi8mo3Pp6CKyVokNzCKnK/cchYOZRUHs7JheIpBLw/7uPd/UHj0Q/6a1B9Nqcz7EuZ8YEpW8DEF4xjr3QWt8dlXYvS0kmRwXY3RxjhoY7iT7JT+BBt7o9Et4WjZ4Pb7T43hy2dGTHgl6hNjZUsEWDhJifnRszT8Hjl9CI875eZe7942TjEujTtaAyLPBg2MVeqHRJ3CQdaowPbb44YLqYEMVontocBcCHn4YCRt88tLGHgnZ2QOD60nTG4F6OvWtPeHAAuXueCwacmIhx2Ly8KxG+2tbVd+fD7m6tXNzY+Pn8w0mTM455BvBYtijbTUvl0Pig+p4pYbEQWDoGrHisz/PrGjb//ePHiyZP19fUDKF3KAOdS2mG22Sw/T5NoD6aFhHPe1djZtjCPHi3z4ba4Mh8vzP/tN/FBPlDPKtL58yMzrXhiLDUjPRrszsLiHPxKwIcnjTz4uHH1zSX8HB/hpJrhYeNJVUUpRZsVRWQinecgcYJ5sP7848bfN278I2poaKhCZzKdG3XRtLKk6U6Ptp+e4jvhHq8mrDL27VwqStOznOL1XDBd8VOIL5RCNA0PCApH3YJhL4+6jGJEGcXTcIU01y+vTlkYXTLC7fIpbKZB5uNWrJVgZip4CPHFUzgBgXPbjn7JdXNPjQfb6y4ilOTQPzh0cIopPKcYKsNplzFw6qyIeHohA+LCrL2x864lY2pWX/HiCnQqDlLNrMlAt2sm38BpFOPOrrDoNJLoXIlMzY/+lfvekY0nRhxTtGAgruE/5nIPnE2vrjWv52o0dJoiIEzhNK5Pj2Y9cV3QyKXmaxU6Rvw8yp0QHhqbqblGTvsO4uO118azkIsWn/BkhylIf+XKOIkRjUONDRUobseT60jnuUaDaxk066FT2i3O5QUjGtFfXR6POUeTc7mAyXFDZ5T0UB8tLRuLanVXiPV4ck6dUNM+w8Z1VhgAz7NTU3sPo6ES5PF4tONCLMYwcZ2V8Hi0lh0aKpPicHe/fFyIoTLLzbKQuLEZuVKKYODlfmCTIVFhBJzNN2wa0lVJuE02ZeTwlVMIiPvVnTBk6BT9H1wDgIP2JJ6nAAAAAElFTkSuQmCC" alt="Fractalite Logo" class="logo">

    <ul class="nav-links">
       <li> 
        <a href="http://localhost:4200/predict-total-available">
          <i class="fas fa-chart-line" style="font-size: 1.5em; margin-right: 20px;"></i> Availability Prediction
        </a>
      </li>
      <li> 
        <a href="http://localhost:4200/predict-optimal">
          <i class="fas fa-bullseye" style="font-size: 1.5em; margin-right: 20px;"></i> Optimal Prediction
        </a>
      </li>
      <li>
        <a href="http://localhost:4200/predict-agency">
          <i class="fas fa-building" style="font-size: 1.5em; margin-right: 20px;"></i> Agency Prediction
        </a>
      </li>
    </ul>
  </nav>

<!-- En-tête -->
<div class="main-content">
<div class="header">
  <h2>Availability Prediction</h2>
</div>


<div class="filters-section">
  <div class="filters-header">
    <h3 class="filters-title">Filters</h3>
  </div>
  
  <form (ngSubmit)="onSubmit()" #availabilityForm="ngForm">
    <div class="filters-grid">
      <div class="filter-group">
        <label class="filter-label" for="date_str">From:</label>
        <input 
          type="date" 
          id="date_str" 
          class="filter-input"
          [(ngModel)]="formData.date_str" 
          name="date_str" 
          required>
      </div>

      <div class="filter-group">
        <label class="filter-label" for="date_fin">To:</label>
        <input 
          type="date" 
          id="date_fin" 
          class="filter-input"
          [(ngModel)]="formData.date_fin" 
          [min]="formData.date_str"
          name="date_fin" 
          required>
      </div>

      <div class="filter-group">
        <label class="filter-label" for="roomType">Room Type:</label>
        <select id="roomType" class="filter-select" [(ngModel)]="formData.roomType" name="roomType" required>
          <option value="">Select room type</option>
          <option [value]="168">Standard</option>
          <option [value]="169">Familiale</option>
        </select>
      </div>
    </div>
  </form>
</div>

<!-- Bouton Generate Report -->
<div class="generate-section">
  <button 
    type="button" 
    class="generate-btn" 
    [disabled]="isLoading"
    (click)="onSubmit()">
    {{ isLoading ? 'Generating...' : 'Generate Report' }}
  </button>
</div>

<!-- Indicateur de chargement -->
<div *ngIf="isLoading" class="loading-section">
  <div class="loading-content">
    <div class="loading-spinner"></div>
    <div class="loading-text">Génération du rapport d'optimisation de l'occupation...</div>
  </div>
</div>

<!-- Section des résultats -->
<div *ngIf="!isLoading && results.length > 0" class="results-section">
  <div class="results-header">
    <h3 class="results-title">General Forecast Report</h3>
  </div>
  
  <div class="table-container">
    <h4>Color Legend</h4>
  <ul class="legend-list">
    <li><span class="legend-box badge-standard"></span> Standard Room</li>
    <li><span class="legend-box badge-familiale"></span> Familiale Room</li>
    <li><span class="legend-box badge-yes"></span> Yes (Event Day or Holiday)</li>
    <li><span class="legend-box badge-no"></span> No (Normal Day)</li>
    <li><span class="legend-box highlight-cell"></span> Predicted Availability</li>
  </ul>
</div>
    <table class="results-table">
      <thead>
        <tr>
          <th>DATE</th>
          <th>PREDICTED AVAILABILITY</th>
          <th>EVENT DAY</th>
          <th>HOLIDAY</th>
          <th>ROOM TYPE</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of results">
          <td>{{ row.date | date:'dd/MM/yyyy' }}</td>
          <td class="highlight-cell">
            <strong>{{ row.total_available_predicted }}</strong>
          </td>
          <td>
            <span class="badge" [ngClass]="row.iseventday ? 'badge-yes' : 'badge-no'">
              {{ row.iseventday ? 'Yes' : 'No' }}
            </span>
          </td>
          <td>
            <span class="badge" [ngClass]="row.vacance_MA ? 'badge-yes' : 'badge-no'">
              {{ row.vacance_MA ? 'Yes' : 'No' }}
            </span>
          </td>
          <td>
            <span class="badge" [ngClass]="+row.roomType === 168 ? 'badge-standard' : 'badge-familiale'">
              {{ +row.roomType === 168 ? 'Standard' : +row.roomType === 169 ? 'Familiale' : 'Unknown' }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>


<!-- État vide -->
<div *ngIf="!isLoading && results.length === 0" class="empty-state">
  <div class="empty-state-text">No data to display</div>
  <div class="empty-state-subtext">Set your filters and click "Generate Report" to view predictions</div>
</div>
</div>
</div>